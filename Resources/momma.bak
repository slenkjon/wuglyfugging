var gameState;

window.addEventListener( 'load', init, false );

function init() {
    help.akihabaraInit( { title : "Your Momma", portrait : false } );
    gbox.addImage( "logo", "logo.jpg" );
    gbox.addImage( "font", "font.png" );
    gbox.addFont( { id:"small", image:"font", firstletter:" ", tileh:8, tilew:8, tilerow:255, gapx:0, gapy:0 } );
    gbox.setCallback( mainLoop );
    gbox.loadAll();
}

function mainLoop() {
    gbox.setGroups( ['background'] );
    gameState = gamecycle.createMaingame( 'gameState', 'background' );

    maingame.gameTitleIntroAnimation = function( reset ) {
	if (reset) {
	    toys.resetToy(this, 'rising');
	}
	gbox.blitFade(gbox.getBufferContext(),{ alpha: 1 });
	toys.logos.linear(this, 'rising', {
	    image: 'logo',
	    sx:    gbox.getScreenW()/2-gbox.getImage('logo').width/2,
	    sy:    gbox.getScreenH(),
	    x:     gbox.getScreenW()/2-gbox.getImage('logo').width/2,
	    y:     20,
	    speed: 1
	});
    };

    gbox.go();
}



